---
- name: Asegura que la maquina esté registrada
  community.general.redhat_subscription:
    state: present
    username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34343666633239643630376330633436373334653963613130616330663135333566623964353265
          3564636461316630356662333232346434346335653131640a306334353838353334643033386465
          37386232376162333530346462626461653030343139373635363539303034326337663264386365
          3966663833633532390a386230383531373831303732626564373366373766623864633438316166
          65353037303631666234313937376232633964633630646535613162336333613366 
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66656436623264396461636633316366373039353437343362343263623365633436373832663539
          6339653665643138353564303634663935666464663533660a306538326537363331666134313135
          32356437313136633639303866663930383661646637393765636530313939363337316163326666
          3133323463656566350a623938663830613930393766376463626231616634346534396266666366
          3964

- name: Asegura que la convención de nombre del equipo se cumpla
  ansible.builtin.fail:
  when: ansible_hostname is regex('[-[:lower:]\d]+')
...
